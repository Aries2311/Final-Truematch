<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TrueMatch â€” Choose Plan</title>

  <script>window.API_BASE = '';</script>
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet" href="/animations.css" />
  <link rel="stylesheet" href="/responsive.css" />
  <link rel="stylesheet" href="/auth.css" />

  <style>
    /* === Background canvas === */
    #tm-bg-canvas{
      position: fixed; inset: 0; width: 100vw; height: 100vh;
      pointer-events: none; z-index: 0; opacity: .95; transform: translateZ(0);
    }
    body.has-bg-canvas > :not(#tm-bg-canvas){ position: relative; z-index: 1; }
    html{ background:#000; }
    @media (prefers-reduced-motion: reduce){ #tm-bg-canvas{ opacity:.35; } }

    :root{
      --ui-font: Inter, "SF Pro Text", "Segoe UI", Roboto, system-ui, -apple-system,
                 "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    }

    body.tm-dark.has-bg-canvas{
      background:#050607 !important;
      overflow-x:hidden;
      min-height:100vh;
      font-family:var(--ui-font);
    }

    /* === Header / Top Actions === */
    .top-actions {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 24px; /* Reduced padding */
      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.15);
      color: #fff;
      padding: 6px 12px; /* Smaller button */
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s ease;
      backdrop-filter: blur(4px);
    }
    
    .nav-btn:hover {
      background: rgba(255,255,255,0.12);
      border-color: rgba(255,255,255,0.3);
      transform: translateY(-1px);
    }

    .nav-btn svg { opacity: 0.8; }

    /* === Compact Header === */
    .auth-header{
      margin-top: 0; /* Remove top margin */
      width: 100%;
      padding: 0 24px;
      box-sizing: border-box;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 16px; /* Reduced space below header */
    }
    .auth-logo{
      height: 45px; /* Smaller Logo */
      width: auto; object-fit: contain; margin-bottom: 4px;
    }
    .auth-header h1{ font-size: 24px; letter-spacing: -0.02em; margin: 0; }
    .auth-header .hint{ font-size: 13px; opacity: .86; margin-top: 2px; }

    /* === Grid Layout Shell === */
    .tier-shell{
      width: min(1000px, 96vw); /* Slightly wider max-width for grid */
      margin: 0 auto;
      padding: 20px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      backdrop-filter: blur(8px);
      box-shadow: 0 30px 70px rgba(0,0,0,.45);
    }

    /* THE MAGIC: 2-COLUMN GRID */
    .tier-list{ 
      display: grid; 
      grid-template-columns: 1fr 1fr; /* Two equal columns */
      gap: 16px; 
    }

    /* Compact Card Style */
    .tier-row{
      display: flex;
      flex-direction: column; /* Stack content vertically inside card */
      gap: 12px;
      padding: 16px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      backdrop-filter: blur(6px);
      transition: all .2s ease;
      height: 100%; /* Match height */
    }
    .tier-row:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.25);
      background: rgba(255,255,255,.08);
      box-shadow: 0 10px 40px rgba(0,0,0,.4);
    }

    .tier-header-group {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .tier-left h3{ margin:0; font-weight: 800; font-size: 18px; letter-spacing: -0.01em; color: #fff; }
    .tier-price{ margin: 2px 0 0; font-size: 13px; color: #64E9EE; font-weight: 600; }
    .tier-desc{ margin: 4px 0 0; font-size: 12px; opacity: .7; line-height: 1.3; min-height: 32px; }

    .tier-features{
      list-style:none; margin:0; padding:0;
      /* Single column features for compact look, or 2 col if space permits */
      display: grid; grid-template-columns: 1fr 1fr; gap: 6px 12px;
      font-size: 12px; opacity: .9;
      flex-grow: 1; /* Push button to bottom */
    }
    .tier-features li{ display:flex; gap:6px; align-items:center; }
    .tier-features svg{ width: 14px; height: 14px; color: #64E9EE; flex-shrink: 0; }

    .tier-actions{ margin-top: auto; /* Align to bottom */ width: 100%; }
    
    .tier-select{
      width: 100%;
      appearance:none; border: 0;
      background: #fff; color: #000;
      padding: 8px 16px; border-radius: 8px;
      font-weight: 700; font-size: 12px; cursor: pointer;
      transition: transform .1s;
    }
    .tier-select:hover{ transform: scale(1.02); box-shadow: 0 0 15px rgba(255,255,255,0.4); }
    
    .tier-select:disabled, .btn--disabled {
      opacity: 0.6; cursor: default; background: #ccc; transform: none !important; box-shadow: none !important;
    }

    /* Unique styles per tier */
    .tier-row[data-tier="free"] { border-top: 4px solid #b0b0b0; border-left: 1px solid rgba(255,255,255,.12); }
    .tier-row[data-tier="plus"] { border-top: 4px solid #3aafb9; border-left: 1px solid rgba(255,255,255,.12); }
    .tier-row[data-tier="elite"] { border-top: 4px solid #9d4edd; border-left: 1px solid rgba(255,255,255,.12); }
    .tier-row[data-tier="concierge"] { border-top: 4px solid #ffd700; border-left: 1px solid rgba(255,255,255,.12); }

    .tier-row[data-tier="free"] .tier-price { color: #fff; opacity: 0.8; }
    .tier-row[data-tier="elite"] .tier-price { color: #e0aaff; }
    .tier-row[data-tier="concierge"] .tier-price { color: #ffe66d; }

    /* Mobile Responsive: Back to Stack */
    @media (max-width: 768px){
      .tier-list{ grid-template-columns: 1fr; }
      .tier-row { flex-direction: row; flex-wrap: wrap; align-items: center; border-top: 1px solid rgba(255,255,255,.12); border-left: 4px solid; }
      
      /* Restore left-border style for mobile list view */
      .tier-row[data-tier="free"] { border-left-color: #b0b0b0; }
      .tier-row[data-tier="plus"] { border-left-color: #3aafb9; }
      .tier-row[data-tier="elite"] { border-left-color: #9d4edd; }
      .tier-row[data-tier="concierge"] { border-left-color: #ffd700; }

      .tier-header-group { width: 100%; margin-bottom: 10px; }
      .tier-left { width: 100%; }
      .tier-actions { width: 100%; margin-top: 10px; }
    }

    .auth-wrap { display: flex; justify-content: center; padding: 0 16px 40px; }
    .tier-notice { text-align:center; margin-bottom: 10px; display:none; color: #ff6b6b; font-size: 13px; }
  </style>
</head>

<body class="tm-dark has-bg-canvas">
  <canvas id="tm-bg-canvas" aria-hidden="true"></canvas>

  <div class="top-actions">
    <a href="dashboard.html" class="nav-btn">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/></svg>
      Dashboard
    </a>

    <button id="btnLogout" class="nav-btn" type="button">
      Logout
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    </button>
  </div>

  <header class="auth-header">
    <img src="/assets/images/truematch-hero-logo.png" alt="TrueMatch" class="auth-logo" />
    <h1>Select a Plan</h1>
    <p class="hint">Upgrade your membership to unlock exclusive features.</p>
  </header>

  <main class="auth-wrap">
    <div id="tierNotice" class="tier-notice"><span id="tierNoticeText"></span></div>

    <section class="auth-card tier-shell">
      <div class="tier-list">

        <article class="tier-row" data-tier="free" data-plan-card="free">
          <div class="tier-left">
            <h3>Member</h3>
            <p class="tier-price">Free</p>
            <p class="tier-desc">Basic access to swipe and match.</p>
          </div>
          <ul class="tier-features">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> 20 Daily Swipes</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Basic Profile</li>
            <li class="muted" style="opacity:0.4;"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg> Monthly shortlist</li>
            <li class="muted" style="opacity:0.4;"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg> Concierge</li>
          </ul>
          <div class="tier-actions">
            <button class="tier-select" type="button" data-plan="free" disabled style="background:#444; color:#aaa;">Current Plan</button>
          </div>
        </article>

        <article class="tier-row" data-tier="plus" data-plan-card="tier1">
          <div class="tier-left">
            <h3>Plus</h3>
            <p class="tier-price">$28.12 / month</p>
            <p class="tier-desc">More control and visibility.</p>
          </div>
          <ul class="tier-features">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Unlimited swipes</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Advanced filters</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Read receipts</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Priority matching</li>
          </ul>
          <div class="tier-actions">
            <button class="tier-select" type="button" data-plan="tier1">Select Plus</button>
          </div>
        </article>

        <article class="tier-row" data-tier="elite" data-plan-card="tier2">
          <div class="tier-left">
            <h3>Elite</h3>
            <p class="tier-price">$95 / month</p>
            <p class="tier-desc">For serious, high-value connections.</p>
          </div>
          <ul class="tier-features">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Elite-only pool</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Monthly shortlist</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Higher visibility</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Soft concierge</li>
          </ul>
          <div class="tier-actions">
            <button class="tier-select" type="button" data-plan="tier2" style="background:#e0aaff;">Select Elite</button>
          </div>
        </article>

        <article class="tier-row" data-tier="concierge" data-plan-card="tier3">
          <div class="tier-left">
            <h3>Concierge</h3>
            <p class="tier-price">$485 / month</p>
            <p class="tier-desc">White-glove experience, fully managed.</p>
          </div>
          <ul class="tier-features">
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Human + AI operator</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Date coordination</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Outreach & follow-up</li>
            <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg> Limited availability</li>
          </ul>
          <div class="tier-actions">
            <button class="tier-select" type="button" data-plan="tier3" style="background:#ffe66d;">Select Concierge</button>
          </div>
        </article>

      </div>
    </section>
  </main>

  <script>
  (() => {
    const canvas = document.getElementById('tm-bg-canvas');
    if (!canvas) return;
    const ctx = canvas.getContext('2d', { alpha: true });
    if (!ctx) return;
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const mouse = { x: 0, y: 0, active: false };
    const particles = [];
    let cw = 0, ch = 0, dpr = 1, raf = null;
    const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
    function pickCount(){ const area = innerWidth * innerHeight; return clamp(Math.floor(area/22000)+28, 38, 90); }
    function init(){ particles.length = 0; const n = pickCount(); for (let i=0;i<n;i++){ particles.push({ x: Math.random()*cw, y: Math.random()*ch, vx: (Math.random()-.5)*.35, vy: (Math.random()-.5)*.35, r: 1 + Math.random()*1.3 }); } }
    function resize(){ dpr = Math.min(devicePixelRatio||1, 2); cw = innerWidth; ch = innerHeight; canvas.width = Math.floor(cw*dpr); canvas.height = Math.floor(ch*dpr); canvas.style.width = cw+'px'; canvas.style.height = ch+'px'; ctx.setTransform(dpr,0,0,dpr,0,0); init(); draw(true); }
    function step(){ for (const p of particles){ p.x += p.vx; p.y += p.vy; if (p.x<0 || p.x>cw) p.vx *= -1; if (p.y<0 || p.y>ch) p.vy *= -1; p.x = clamp(p.x,0,cw); p.y = clamp(p.y,0,ch); if (mouse.active){ const dx = p.x - mouse.x; const dy = p.y - mouse.y; const d2 = dx*dx + dy*dy; const inf = 220; if (d2 < inf*inf && d2 > 1e-3){ const d = Math.sqrt(d2); const f = (1 - d/inf) * .035; p.vx += (dx/d) * f; p.vy += (dy/d) * f; } } p.vx *= .985; p.vy *= .985; } }
    function draw(still){ ctx.clearRect(0,0,cw,ch); ctx.globalCompositeOperation = 'lighter'; const md = 150; const md2 = md*md; for (let i=0;i<particles.length;i++){ const a = particles[i]; for (let j=i+1;j<particles.length;j++){ const b = particles[j]; const dx = a.x-b.x, dy = a.y-b.y; const d2 = dx*dx + dy*dy; if (d2 <= md2){ const t = 1 - (Math.sqrt(d2)/md); const alpha = t * .12; ctx.strokeStyle = `rgba(255,255,255,${alpha})`; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke(); } } } if (mouse.active){ const m = 210, m2 = m*m; for (const p of particles){ const dx = p.x - mouse.x, dy = p.y - mouse.y; const d2 = dx*dx + dy*dy; if (d2 < m2){ const t = 1 - (Math.sqrt(d2)/m); const alpha = t * .18; ctx.strokeStyle = `rgba(100,233,238,${alpha})`; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(mouse.x,mouse.y); ctx.stroke(); } } } for (const p of particles){ ctx.fillStyle = 'rgba(255,255,255,.55)'; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill(); } ctx.globalCompositeOperation = 'source-over'; if (!reduceMotion && !still) step(); }
    function loop(){ draw(false); raf = requestAnimationFrame(loop); }
    function onMove(e){ const t = e.touches && e.touches[0]; mouse.x = t ? t.clientX : e.clientX; mouse.y = t ? t.clientY : e.clientY; mouse.active = true; }
    function onLeave(){ mouse.active = false; }
    addEventListener('resize', () => { if (raf) cancelAnimationFrame(raf); raf = null; resize(); if (!reduceMotion) loop(); }, { passive: true });
    addEventListener('mousemove', onMove, { passive: true }); addEventListener('touchstart', onMove, { passive: true }); addEventListener('touchmove', onMove, { passive: true }); addEventListener('mouseleave', onLeave);
    resize(); if (!reduceMotion) loop();
  })();
  </script>
  <script src="./tm-loader.js"></script>
  <script type="module" src="/tier.js"></script>
</body>
</html>